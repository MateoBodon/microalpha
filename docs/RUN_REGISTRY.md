# Run Registry (Runs Index)

The run registry is a deterministic CSV index of all artifact manifests. It exists to make
reporting auditable and to prevent cherry-picking results.

## What it is

- `reports/summaries/runs_index.csv` is generated by scanning `artifacts/**/manifest.json`.
- Each row corresponds to a run and includes stable identifiers, config hashes, holdout
  window dates, and (when available) headline holdout metrics.
- The file is deterministic: fixed columns, stable ordering, no timestamps.

## How to regenerate

From the repo root:

```
make runs-index
```

Or directly:

```
python3 scripts/build_runs_index.py
```

Output path (always): `reports/summaries/runs_index.csv`.

## Do not cherry-pick (non-negotiable)

Any headline claim **must** reference the holdout run(s) and be accompanied by the
current `reports/summaries/runs_index.csv`. Do not select the best-looking run out of a
set of experiments and present it as representative.

If you are comparing multiple runs, include the full runs index and specify exactly which
row(s) back the headline statement.

## What qualifies as a headline run

A run is headline-eligible only if all of the following are true:

- `unsafe_execution` is false (no same-bar / leakage-unsafe execution).
- `run_invalid` is false and integrity checks passed (`integrity.json` exists and is OK).
- For walk-forward runs: `holdout_start`/`holdout_end` are present and
  `holdout_metrics_path` resolves to a valid metrics file.
- Any selection constraints or non-degenerate checks are satisfied (no failure reason
  recorded in the manifest).

## Disqualifiers (not headline-eligible)

- Unsafe execution or explicit leakage/override flags.
- Failed integrity checks, missing integrity artifacts, or `run_invalid = true`.
- Missing holdout metrics or holdout date ranges.
- Degenerate runs (zero trades / zero turnover) or selection failures.
- Missing config hash or manifest fields that prevent reproducibility.

If in doubt, treat the run as **non-headline** and document the limitation.
